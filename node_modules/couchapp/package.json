{
  "name": "couchapp",
  "description": "Utilities for building CouchDB applications.",
  "tags": [
    "couchdb",
    "webframework"
  ],
  "version": "0.10.0",
  "author": {
    "name": "Mikeal Rogers",
    "email": "mikeal.rogers@gmail.com"
  },
  "engines": [
    "node >= 0.1.95"
  ],
  "main": "./main",
  "dependencies": {
    "watch": "~0.8.0",
    "request": "*",
    "http-proxy": "*",
    "connect": "*",
    "nano": "*",
    "url": "*",
    "coffee-script": "*"
  },
  "bin": {
    "couchapp": "./bin.js"
  },
  "readme": "# Installation\n\nInstall node.\n\nInstall npm.\n\n<pre>\n$ git clone repo\n$ cd node.couchapp.js\n$ npm install\n$ npm link .\n</pre>\n\n<pre>\n$ couchapp help\ncouchapp -- utility for creating couchapps\n\nUsage - old style with single app.js:\n  couchapp &lt;command> app.js http://localhost:5984/dbname [opts]\n\nUsage - new style with multiple app files:\n  directory based config specified by switch - multiple app files and pre- and post-processing capability)\n  couchapp -dc &lt;<command> &lt;appconfigdirectory> http://localhost:5984/dbname\n\nCommands:\n  push   : Push app once to server.\n  sync   : Push app then watch local files for changes.\n  boiler : Create a boiler project.\n  serve  : Serve couchapp from development webserver\n            you can specify some options\n            -p port  : list on port portNum [default=3000]\n            -d dir   : attachments directory [default='attachments']\n            -l       : log rewrites to couchdb [default='false']\n</pre>\n\n<pre>\nDirectory-based config:\n\n  -dc (directory config) switch uses multiple config files in the directory specified by &lt;appconfigdirectory>\n\n  Any file with a filename that begins with \"app\" will be executed.\n\n  Additionally\n\n  (i) if the app config directory contains file beforepushsync.js then this will be executed before any of the app files have run\n  (ii) if the app config directory contains file afterpushsync.js then this will be executed after all of the app files have run\n\n  beforepushsync.js and afterpushsync.js can be used to perform any before/after processing, using node.js code for example.\n\n  The sample afterpushsync.js shows lookup data being added to CouchDB after the CouchApp has been pushed.\n</pre>\n\napp.js example:\n\n<pre>\n  var couchapp = require('couchapp')\n    , path = require('path');\n\n  ddoc = {\n      _id: '_design/app'\n    , views: {}\n    , lists: {}\n    , shows: {} \n  }\n\n  module.exports = ddoc;\n\n  ddoc.views.byType = {\n    map: function(doc) {\n      emit(doc.type, null);\n    },\n    reduce: '_count'\n  }\n\n  ddoc.views.peopleByName = {\n    map: function(doc) {\n      if(doc.type == 'person') {\n        emit(doc.name, null);\n      }\n    }\n  }\n\n  ddoc.lists.people = function(head, req) {\n    start({\n      headers: {\"Content-type\": \"text/html\"}\n    });\n    send(\"&lt;ul id='people'>\\n\");\n    while(row = getRow()) {\n      send(\"\\t&lt;li class='person name'>\" + row.key + \"&lt;/li>\\n\");\n    }\n    send(\"&lt;/ul>\\n\")\n  }\n\n  ddoc.shows.person = function(doc, req) {\n    return {\n      headers: {\"Content-type\": \"text/html\"},\n      body: \"&lt;h1 id='person' class='name'>\" + doc.name + \"&lt;/h1>\\n\"\n    }\n  }\n  \n  ddoc.validate_doc_update = function (newDoc, oldDoc, userCtx) {\n    function require(field, message) {\n      message = message || \"Document must have a \" + field;\n      if (!newDoc[field]) throw({forbidden : message});\n    };\n\n    if (newDoc.type == \"person\") {\n      require(\"name\");\n    }\n  }\n\n  couchapp.loadAttachments(ddoc, path.join(__dirname, '_attachments'));\n</pre>\n\n\nLocal development server example.\n\nStart the server:\n\n    couchapp serve app.js http://localhost:5984/example_db -p 3000 -l -d attachments\n\nNow you can access your couchapp at http://localhost:3000/ . Code, hack and when you are\nhappy with the result simply do:\n\n    couchapp push app.js http://localhost:5984/example_db\n",
  "readmeFilename": "README.md",
  "_id": "couchapp@0.10.0",
  "_from": "couchapp@~0.10.0"
}
